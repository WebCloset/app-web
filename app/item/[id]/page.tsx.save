// app/item/[id]/page.tsx
import { headers } from "next/headers";

type ApiResponse = {
  item: {
    id: string;
    brand: string | null;
    title: string | null;
    category: string | null;
    image_url: string | null;
    min_price_cents: number | null;
  };
  offers: Array<{
    link_id: string;
    marketplace_code: string | null;
    title: string | null;
    price_cents: number | null;
    currency: string | null;
    image_url: string | null;
    seller_url: string | null;
  }>;
};

function formatPrice(cents: number | null, currency = "USD") {
  if (cents == null) return "â€”";
  return new Intl.NumberFormat("en-US", {
    style: "currency",
    currency,
    maximumFractionDigits: 0,
  }).format(cents / 100);
}

export default async function ItemPage({ params }: { params: { id: string } }) {
  const h = headers();
  const host = h.get("host");
  const proto = process.env.NODE_ENV === "development" ? "ht
